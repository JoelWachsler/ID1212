{"version":3,"sources":["../../src/net/client_handler.js"],"names":["ClientHandler","controller","socket","id","console","log","gameController","createPlayer","sendIdToClient","registerSocketEvents","networkController","pushInitialData","on","updateMovement","newDirection","disconnect","emit","removePlayer"],"mappings":";;;;;;;;;;AAAA;;;IAGqBA,a;AACnB,yBAAYC,UAAZ,EAAwBC,MAAxB,EAAgC;AAAA;;AAC9B,SAAKD,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,EAAL,GAAUD,OAAOC,EAAjB;AACAC,YAAQC,GAAR,CAAe,KAAKF,EAApB;;AAEA,SAAKF,UAAL,CAAgBK,cAAhB,CAA+BC,YAA/B,CAA4C,KAAKJ,EAAjD;AACA,SAAKK,cAAL,CAAoB,KAAKL,EAAzB;AACA,SAAKM,oBAAL;;AAEA;AACA,SAAKR,UAAL,CAAgBS,iBAAhB,CAAkCC,eAAlC,CAAkDT,MAAlD;AACD;;;;2CAEsB;AAAA;;AACrB,WAAKA,MAAL,CAAYU,EAAZ,CAAe,iBAAf,EAAkC;AAAA,eAChC,MAAKC,cAAL,CAAoBC,YAApB,CADgC;AAAA,OAAlC;;AAIA,WAAKZ,MAAL,CAAYU,EAAZ,CAAe,YAAf,EAA6B;AAAA,eAAM,MAAKG,UAAL,EAAN;AAAA,OAA7B;AACD;;;qCAEgB;AACf,WAAKb,MAAL,CAAYc,IAAZ,CAAiB,IAAjB,EAAuB,KAAKb,EAA5B;AACD;;;mCAEcW,Y,EAAc;AAC3B,WAAKb,UAAL,CAAgBK,cAAhB,CAA+BO,cAA/B,CAA8C,KAAKV,EAAnD,EAAuDW,YAAvD;AACD;;;iCAEY;AACXV,cAAQC,GAAR,CAAe,KAAKF,EAApB;AACA,WAAKF,UAAL,CAAgBK,cAAhB,CAA+BW,YAA/B,CAA4C,KAAKd,EAAjD;AACD;;;;;;kBAlCkBH,a","file":"client_handler.js","sourcesContent":["/**\n * Handles communication to a client.\n */\nexport default class ClientHandler {\n  constructor(controller, socket) {\n    this.controller = controller;\n    this.socket = socket;\n    this.id = socket.id;\n    console.log(`${this.id} has connected!`);\n\n    this.controller.gameController.createPlayer(this.id);\n    this.sendIdToClient(this.id);\n    this.registerSocketEvents();\n\n    // Send initial data to this client only\n    this.controller.networkController.pushInitialData(socket);\n  }\n\n  registerSocketEvents() {\n    this.socket.on(\"update_movement\", newDirection =>\n      this.updateMovement(newDirection)\n    );\n\n    this.socket.on(\"disconnect\", () => this.disconnect());\n  }\n\n  sendIdToClient() {\n    this.socket.emit(\"id\", this.id);\n  }\n\n  updateMovement(newDirection) {\n    this.controller.gameController.updateMovement(this.id, newDirection);\n  }\n\n  disconnect() {\n    console.log(`${this.id} has disconnected!`);\n    this.controller.gameController.removePlayer(this.id);\n  }\n}\n"]}